{"version":3,"sources":["webpack:///./src/views/UserEdit.vue","webpack:///./src/views/UserEdit.vue?d47a"],"names":["class","for","submitForm","id","user","name","type","placeholder","required","image","src","width","height","accept","changeFile","disabled","isProcessing","data","created","this","setUser","currentUser","computed","watch","newValue","methods","$route","params","Number","$router","push","e","files","target","length","imageURL","window","URL","createObjectURL","fire","icon","title","form","formData","FormData","users","update","userId","status","Error","message","console","log","render"],"mappings":"oJACOA,MAAM,kB,GAEFA,MAAM,Q,EACT,eAAiD,SAA1CA,MAAM,aAAaC,IAAI,QAAO,QAAI,G,GAYtCD,MAAM,Q,EACT,eAAmD,SAA5CA,MAAM,aAAaC,IAAI,SAAQ,SAAK,G,gDAhBjD,eAsCM,MAtCN,EAsCM,CArCJ,eAoCO,QApCA,SAAM,8CAAe,EAAAC,YAAA,EAAAA,WAAA,qBAAU,sB,CACpC,eAWM,MAXN,EAWM,CAVJ,E,eACA,eAQE,SAPAC,GAAG,O,qDACM,EAAAC,KAAKC,KAAI,IAClBC,KAAK,OACLD,KAAK,OACLL,MAAM,eACNO,YAAY,aACZC,SAAA,I,mBALS,EAAAJ,KAAKC,UASlB,eAiBM,MAjBN,EAiBM,CAhBJ,EAEQ,EAAAD,KAAKK,O,iBADb,eAME,O,MAJCC,IAAK,EAAAN,KAAKK,MACXT,MAAM,6BACNW,MAAM,MACNC,OAAO,O,uCAET,eAOE,SANAT,GAAG,QACHG,KAAK,OACLD,KAAK,QACLQ,OAAO,UACPb,MAAM,eACL,SAAM,8BAAE,EAAAc,YAAA,EAAAA,WAAA,sB,WAIb,eAES,UAFDR,KAAK,SAASN,MAAM,kBAAmBe,SAAU,EAAAC,cAAc,WAEvE,iB,oIAUS,GACbC,KADa,WAEX,MAAO,CACLb,KAAM,GACNY,cAAc,IAGlBE,QAPa,WAQXC,KAAKC,QAAQD,KAAKE,cAEpBC,SAAU,kBACL,eAAS,CAAC,iBAEfC,MAAO,CACLF,YADK,SACOG,GACVL,KAAKC,QAAQI,KAGjBC,QAAS,CACPL,QADO,SACChB,GACN,IAAQD,EAAOgB,KAAKO,OAAOC,OAAnBxB,GACJyB,OAAOzB,KAAQC,EAAKD,IACtBgB,KAAKU,QAAQC,KAAK,CAAEzB,KAAM,cAE5Bc,KAAKf,KAAL,kBAAiBe,KAAKE,cAExBP,WARO,SAQIiB,GACT,IAAQC,EAAUD,EAAEE,OAAZD,MAER,GAAKA,EAAME,OAEJ,CACL,IAAMC,EAAWC,OAAOC,IAAIC,gBAAgBN,EAAM,IAClDb,KAAKf,KAAKK,MAAQ0B,OAHlBhB,KAAKf,KAAKK,MAAQ,IAMhBP,WAlBC,SAkBU6B,GAAG,gLAEX,EAAK3B,KAAKC,QAAQ,EAAKD,KAAKC,KAAK6B,OAAS,IAF/B,yCAGP,OAAMK,KAAK,CAChBC,KAAM,QACNC,MAAO,yDALK,cAQhB,EAAKzB,cAAe,EAEd0B,EAAOX,EAAEE,OACTU,EAAW,IAAIC,SAASF,GAXd,SAaOG,EAAA,KAASC,OAAO,CAAEC,OAAQ,EAAK3C,KAAKD,GAAIwC,aAb/C,mBAaR1B,EAbQ,EAaRA,KAEY,YAAhBA,EAAK+B,OAfO,uBAgBR,IAAIC,MAAMhC,EAAKiC,SAhBP,eAmBhB,EAAKrB,QAAQC,KAAK,CAAEzB,KAAM,eAAgBsB,OAAQ,CAAExB,GAAI,EAAKkB,YAAYlB,MAnBzD,kBAoBT,OAAMoC,KAAK,CAChBC,KAAM,UACNC,MAAO,0BAtBO,4CAyBhB,EAAKzB,cAAe,EACpBmC,QAAQC,IAAR,MA1BgB,kBA2BT,OAAMb,KAAK,CAChBC,KAAM,QACNC,MAAO,yDA7BO,+DChFxB,EAAOY,OAASA,EAED","file":"js/chunk-2d228901.8dfdc8b5.js","sourcesContent":["<template>\n  <div class=\"container py-5\">\n    <form @submit.prevent.stop=\"submitForm\">\n      <div class=\"mb-3\">\n        <label class=\"form-label\" for=\"name\">Name</label>\n        <input\n          id=\"name\"\n          v-model=\"user.name\"\n          type=\"text\"\n          name=\"name\"\n          class=\"form-control\"\n          placeholder=\"Enter Name\"\n          required\n        />\n      </div>\n\n      <div class=\"mb-3\">\n        <label class=\"form-label\" for=\"image\">Image</label>\n        <img\n          v-if=\"user.image\"\n          :src=\"user.image\"\n          class=\"d-block img-thumnnail mb-3\"\n          width=\"200\"\n          height=\"200\"\n        />\n        <input\n          id=\"image\"\n          type=\"file\"\n          name=\"image\"\n          accept=\"image/*\"\n          class=\"form-control\"\n          @change=\"changeFile\"\n        />\n      </div>\n\n      <button type=\"submit\" class=\"btn btn-primary\" :disabled=\"isProcessing\">\n        Submit\n      </button>\n    </form>\n  </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex';\nimport usersAPI from '../apis/users';\nimport { Toast } from '../utils/helpers';\n\nexport default {\n  data() {\n    return {\n      user: {},\n      isProcessing: false\n    };\n  },\n  created() {\n    this.setUser(this.currentUser);\n  },\n  computed: {\n    ...mapState(['currentUser'])\n  },\n  watch: {\n    currentUser(newValue) {\n      this.setUser(newValue);\n    }\n  },\n  methods: {\n    setUser(user) {\n      const { id } = this.$route.params;\n      if (Number(id) !== user.id) {\n        this.$router.push({ name: 'not-found' });\n      }\n      this.user = { ...this.currentUser };\n    },\n    changeFile(e) {\n      const { files } = e.target;\n\n      if (!files.length) {\n        this.user.image = '';\n      } else {\n        const imageURL = window.URL.createObjectURL(files[0]);\n        this.user.image = imageURL;\n      }\n    },\n    async submitForm(e) {\n      try {\n        if (!this.user.name || this.user.name.length > 25) {\n          return Toast.fire({\n            icon: 'error',\n            title: 'Name can not be empty or longer than 25 characters.'\n          });\n        }\n        this.isProcessing = true;\n\n        const form = e.target;\n        const formData = new FormData(form);\n\n        const { data } = await usersAPI.update({ userId: this.user.id, formData });\n\n        if (data.status !== 'success') {\n          throw new Error(data.message);\n        }\n\n        this.$router.push({ name: 'user-profile', params: { id: this.currentUser.id } });\n        return Toast.fire({\n          icon: 'success',\n          title: 'Update successfully!'\n        });\n      } catch (err) {\n        this.isProcessing = false;\n        console.log(err);\n        return Toast.fire({\n          icon: 'error',\n          title: 'Unable to update user data, please try again later.'\n        });\n      }\n    }\n  }\n};\n</script>\n","import { render } from \"./UserEdit.vue?vue&type=template&id=c8db4a74\"\nimport script from \"./UserEdit.vue?vue&type=script&lang=js\"\nexport * from \"./UserEdit.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}