{"version":3,"sources":["webpack:///./src/views/AdminRestaurants.vue","webpack:///./src/components/AdminRestaurantsTable.vue","webpack:///./src/components/AdminRestaurantsTable.vue?447e","webpack:///./src/views/AdminRestaurants.vue?6e1d","webpack:///./src/apis/admin.js","webpack:///./src/components/AdminNav.vue","webpack:///./src/components/AdminNav.vue?c69a"],"names":["class","to","scope","width","restaurants","restaurant","key","id","Category","name","type","deleteRestaurant","data","isLoading","components","Spinner","created","this","fetchRestaurants","methods","admin","get","console","log","fire","icon","title","restaurantId","result","isConfirmed","delete","status","Error","message","filter","$router","push","render","AdminNav","AdminRestaurantsTable","categories","apiHelper","create","post","update","categoryId","put","formData","getDetail","users","userId"],"mappings":"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","file":"js/chunk-90f9d1e4.95b7c1fc.js","sourcesContent":["<template>\n  <div class=\"container py-5\">\n    <!-- 後台導覽頁籤 AdminNav -->\n    <admin-nav />\n\n    <router-link :to=\"{ name: 'admin-restaurant-new' }\" class=\"btn btn-primary mb-4\">\n      New Restaurant\n    </router-link>\n\n    <!-- 後台餐廳列表 AdminRestaurantsTable -->\n    <admin-restaurants-table />\n  </div>\n</template>\n\n<script>\nimport AdminNav from '../components/AdminNav.vue';\nimport AdminRestaurantsTable from '../components/AdminRestaurantsTable.vue';\n\nexport default {\n  components: {\n    AdminNav,\n    AdminRestaurantsTable\n  }\n};\n</script>\n","<template>\n  <!-- Spinner -->\n  <spinner v-if=\"isLoading\" />\n  <table v-else class=\"table table-striped\">\n    <thead class=\"table-dark\">\n      <tr>\n        <th scope=\"col\">\n          #\n        </th>\n        <th scope=\"col\">\n          Category\n        </th>\n        <th scope=\"col\">\n          Name\n        </th>\n        <th scope=\"col\" width=\"300\">\n          操作\n        </th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr v-for=\"restaurant in restaurants\" :key=\"restaurant.id\">\n        <th scope=\"row\">\n          {{ restaurant.id }}\n        </th>\n        <td>{{ restaurant.Category ? restaurant.Category.name : 'uncategorized' }}</td>\n        <td>{{ restaurant.name }}</td>\n        <td class=\"d-flex justify-content-between\">\n          <router-link\n            :to=\"{ name: 'admin-restaurant', params: { id: restaurant.id } }\"\n            class=\"btn btn-link\"\n            >Detail</router-link\n          >\n\n          <router-link\n            :to=\"{ name: 'admin-restaurant-edit', params: { id: restaurant.id } }\"\n            class=\"btn btn-link\"\n            >Edit</router-link\n          >\n\n          <button\n            type=\"button\"\n            class=\"btn btn-link\"\n            @click.prevent.stop=\"deleteRestaurant(restaurant.id)\"\n          >\n            Delete\n          </button>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n</template>\n\n<script>\nimport Spinner from './Spinner.vue';\nimport adminAPI from '../apis/admin';\nimport { Toast, ConfirmDelete } from '../utils/helpers';\n\nexport default {\n  data() {\n    return {\n      restaurants: [],\n      isLoading: true\n    };\n  },\n  components: {\n    Spinner\n  },\n  created() {\n    this.fetchRestaurants();\n  },\n  methods: {\n    async fetchRestaurants() {\n      try {\n        this.isLoading = true;\n        const { data } = await adminAPI.restaurants.get();\n        this.restaurants = data.restaurants;\n        this.isLoading = false;\n      } catch (err) {\n        this.isLoading = false;\n        console.log(err);\n        Toast.fire({\n          icon: 'error',\n          title: 'Unable to get restaurants data, please try again later.'\n        });\n      }\n    },\n    async deleteRestaurant(restaurantId) {\n      try {\n        // double check before deleting a restaurant\n        const result = await ConfirmDelete();\n        if (result.isConfirmed) {\n          const { data } = await adminAPI.restaurants.delete({ restaurantId });\n\n          if (data.status !== 'success') {\n            throw new Error(data.message);\n          }\n\n          this.restaurants = this.restaurants.filter(restaurant => restaurant.id !== restaurantId);\n\n          this.$router.push({ name: 'admin-restaurants' });\n        }\n      } catch (err) {\n        console.log(err);\n        Toast.fire({\n          icon: 'error',\n          title: 'Unable to delete the restaurant, please try again later.'\n        });\n      }\n    }\n  }\n};\n</script>\n","import { render } from \"./AdminRestaurantsTable.vue?vue&type=template&id=08d228d7\"\nimport script from \"./AdminRestaurantsTable.vue?vue&type=script&lang=js\"\nexport * from \"./AdminRestaurantsTable.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { render } from \"./AdminRestaurants.vue?vue&type=template&id=397fff04\"\nimport script from \"./AdminRestaurants.vue?vue&type=script&lang=js\"\nexport * from \"./AdminRestaurants.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { apiHelper } from '../utils/helpers';\n\nexport default {\n  categories: {\n    get() {\n      return apiHelper.get('/admin/categories');\n    },\n    create({ name }) {\n      return apiHelper.post('/admin/categories', { name });\n    },\n    update({ categoryId, name }) {\n      return apiHelper.put(`/admin/categories/${categoryId}`, { name });\n    },\n    delete({ categoryId }) {\n      return apiHelper.delete(`/admin/categories/${categoryId}`);\n    }\n  },\n  restaurants: {\n    create({ formData }) {\n      return apiHelper.post('/admin/restaurants', formData);\n    },\n    get() {\n      return apiHelper.get('/admin/restaurants');\n    },\n    getDetail({ restaurantId }) {\n      return apiHelper.get(`/admin/restaurants/${restaurantId}`);\n    },\n    update({ restaurantId, formData }) {\n      return apiHelper.put(`/admin/restaurants/${restaurantId}`, formData);\n    },\n    delete({ restaurantId }) {\n      return apiHelper.delete(`/admin/restaurants/${restaurantId}`);\n    }\n  },\n  users: {\n    get() {\n      return apiHelper.get('/admin/users');\n    },\n    update({ userId }) {\n      return apiHelper.put(`/admin/users/${userId}`, null);\n    }\n  }\n};\n","<template>\n  <div class=\"mb-3\">\n    <h1>Admin Backend</h1>\n    <router-link :to=\"{ name: 'admin-restaurants' }\">Restaurants</router-link> |\n    <router-link :to=\"{ name: 'admin-categories' }\">Categories</router-link> |\n    <router-link :to=\"{ name: 'admin-users' }\">Users</router-link>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'AdminNav'\n};\n</script>\n","import { render } from \"./AdminNav.vue?vue&type=template&id=31f4d4b8\"\nimport script from \"./AdminNav.vue?vue&type=script&lang=js\"\nexport * from \"./AdminNav.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}