(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0ca95d72"],{1511:function(e,t,r){"use strict";r.r(t);var n=r("7a23"),l={class:"container mt-5 pt-5",id:"user-profile"},s={class:"row"},c={class:"row"},o={class:"row mb-3"};function a(e,t,r,a,i,u){var b=Object(n["z"])("spinner"),f=Object(n["z"])("user-profile-card"),d=Object(n["z"])("user-followings-card"),g=Object(n["z"])("user-followers-card"),j=Object(n["z"])("user-comments-card"),O=Object(n["z"])("user-fav-restaurants-card");return Object(n["s"])(),Object(n["d"])("div",l,[i.isLoading?(Object(n["s"])(),Object(n["d"])(b,{key:0})):(Object(n["s"])(),Object(n["d"])(n["a"],{key:1},[Object(n["g"])("div",s,[Object(n["g"])(f,{"user-profile":i.userProfile,"initial-following":i.isFollowed},null,8,["user-profile","initial-following"])]),Object(n["g"])("div",c,[Object(n["g"])(d,{followings:i.followings},null,8,["followings"]),Object(n["g"])(g,{followers:i.followers},null,8,["followers"])]),Object(n["g"])("div",o,[Object(n["g"])(j,{restaurants:i.commentRestaurants},null,8,["restaurants"]),Object(n["g"])(O,{restaurants:i.favRestaurants},null,8,["restaurants"])])],64))])}var i=r("5530"),u=r("1da1"),b=(r("96cf"),r("b0c0"),{class:"col-12 col-md-6 col-lg-4"}),f={class:"col-12 col-md-6 col-lg-8 d-flex flex-column justify-content-between pt-4 pb-5"},d={class:"mb-3"},g=Object(n["f"])(" 已評論餐廳 "),j=Object(n["f"])(" 收藏的餐廳 "),O=Object(n["f"])(" followings "),p=Object(n["f"])(" followers "),m={key:0},w=Object(n["f"])("Edit"),v={key:1};function h(e,t,r,l,s,c){var o=Object(n["z"])("router-link");return Object(n["s"])(),Object(n["d"])(n["a"],null,[Object(n["g"])("div",b,[Object(n["g"])("img",{src:e.$filter.emptyImageFilter(r.userProfile.image),style:{width:"250px","margin-bottom":"25px"}},null,8,["src"])]),Object(n["g"])("div",f,[Object(n["g"])("div",d,[Object(n["g"])("h3",null,Object(n["C"])(r.userProfile.name),1),Object(n["g"])("p",null,Object(n["C"])(r.userProfile.email),1),Object(n["g"])("div",null,[Object(n["g"])("strong",null,Object(n["C"])(r.userProfile.commentRestaurantsLength),1),g]),Object(n["g"])("div",null,[Object(n["g"])("strong",null,Object(n["C"])(r.userProfile.favRestaurantsLength),1),j]),Object(n["g"])("div",null,[Object(n["g"])("strong",null,Object(n["C"])(r.userProfile.followingsLength),1),O]),Object(n["g"])("div",null,[Object(n["g"])("strong",null,Object(n["C"])(r.userProfile.followersLength),1),p])]),e.currentUser.id===r.userProfile.id?(Object(n["s"])(),Object(n["d"])("div",m,[Object(n["g"])(o,{to:{name:"user-profile-edit",params:{id:e.currentUser.id}},class:"btn btn-primary"},{default:Object(n["J"])((function(){return[w]})),_:1},8,["to"])])):(Object(n["s"])(),Object(n["d"])("div",v,[s.isFollowed?(Object(n["s"])(),Object(n["d"])("button",{key:0,type:"button",class:"btn btn-danger",onClick:t[1]||(t[1]=Object(n["L"])((function(e){return c.unfollow(r.userProfile.id)}),["stop","prevent"]))}," Unfollow ")):(Object(n["s"])(),Object(n["d"])("button",{key:1,type:"button",class:"btn btn-primary",onClick:t[2]||(t[2]=Object(n["L"])((function(e){return c.follow(r.userProfile.id)}),["stop","prevent"]))}," Follow "))]))])],64)}var y=r("5502"),x=r("4cce"),k=r("2fa3"),F={props:{userProfile:{type:Object,required:!0},initialFollowing:{type:Boolean,required:!0}},data:function(){return{isFollowed:this.initialFollowing}},computed:Object(i["a"])({},Object(y["b"])(["currentUser"])),watch:{initialFollowing:function(e){this.isFollowed=e}},methods:{follow:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){var n,l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,x["a"].follow(e);case 3:if(n=r.sent,l=n.data,"success"===l.status){r.next=7;break}throw new Error(l.message);case 7:t.isFollowed=!0,r.next=13;break;case 10:r.prev=10,r.t0=r["catch"](0),k["b"].fire({icon:"error",title:"Unable to follow the user, please try again later."});case 13:case"end":return r.stop()}}),r,null,[[0,10]])})))()},unfollow:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){var n,l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,x["a"].unfollow(e);case 3:if(n=r.sent,l=n.data,"success"===l.status){r.next=7;break}throw new Error(l.message);case 7:t.isFollowed=!1,r.next=13;break;case 10:r.prev=10,r.t0=r["catch"](0),k["b"].fire({icon:"error",title:"Unable to unfollow the user, please try again later."});case 13:case"end":return r.stop()}}),r,null,[[0,10]])})))()}}};F.render=h;var R=F,C={class:"col-12 col-lg-6 px-2 mb-3"},P={class:"info-container border"},U={class:"title-container px-4 py-3"},L=Object(n["f"])(" followings "),z={class:"image-container col-12 p-4 d-flex flex-wrap"};function J(e,t,r,l,s,c){var o=Object(n["z"])("router-link");return Object(n["s"])(),Object(n["d"])("div",C,[Object(n["g"])("div",P,[Object(n["g"])("div",U,[Object(n["g"])("div",null,[Object(n["g"])("strong",null,Object(n["C"])(r.followings.length),1),L])]),Object(n["g"])("div",z,[(Object(n["s"])(!0),Object(n["d"])(n["a"],null,Object(n["y"])(r.followings,(function(t){return Object(n["s"])(),Object(n["d"])("div",{key:t.id,class:"mb-2 me-2"},[Object(n["g"])(o,{to:{name:"user-profile",params:{id:t.id}}},{default:Object(n["J"])((function(){return[Object(n["g"])("img",{src:e.$filter.emptyImageFilter(t.image)},null,8,["src"])]})),_:2},1032,["to"])])})),128))])])])}var q={props:{followings:{type:Array,required:!0}}};q.render=J;var $=q,I={class:"col-12 col-lg-6 px-2 mb-3"},_={class:"info-container border"},A={class:"title-container px-4 py-3"},E=Object(n["f"])(" followers "),B={class:"image-container col-12 p-4 d-flex flex-wrap"};function S(e,t,r,l,s,c){var o=Object(n["z"])("router-link");return Object(n["s"])(),Object(n["d"])("div",I,[Object(n["g"])("div",_,[Object(n["g"])("div",A,[Object(n["g"])("div",null,[Object(n["g"])("strong",null,Object(n["C"])(r.followers.length),1),E])]),Object(n["g"])("div",B,[(Object(n["s"])(!0),Object(n["d"])(n["a"],null,Object(n["y"])(r.followers,(function(t){return Object(n["s"])(),Object(n["d"])("div",{key:t.id,class:"mb-2 me-2"},[Object(n["g"])(o,{to:{name:"user-profile",params:{id:t.id}}},{default:Object(n["J"])((function(){return[Object(n["g"])("img",{src:e.$filter.emptyImageFilter(t.image)},null,8,["src"])]})),_:2},1032,["to"])])})),128))])])])}var D={props:{followers:{type:Array,required:!0}}};D.render=S;var G=D,H={class:"col-12 col-lg-6 px-2 mb-3"},K={class:"info-container border"},M={class:"title-container px-4 py-3"},N=Object(n["f"])(" 已評論餐廳 "),Q={class:"image-container col-12 p-4 d-flex flex-wrap"};function T(e,t,r,l,s,c){var o=Object(n["z"])("router-link");return Object(n["s"])(),Object(n["d"])("div",H,[Object(n["g"])("div",K,[Object(n["g"])("div",M,[Object(n["g"])("div",null,[Object(n["g"])("strong",null,Object(n["C"])(r.restaurants.length),1),N])]),Object(n["g"])("div",Q,[(Object(n["s"])(!0),Object(n["d"])(n["a"],null,Object(n["y"])(r.restaurants,(function(t){return Object(n["s"])(),Object(n["d"])("div",{key:t.id,class:"mb-2 me-2"},[Object(n["g"])(o,{to:{name:"restaurant",params:{id:t.id}}},{default:Object(n["J"])((function(){return[Object(n["g"])("img",{src:e.$filter.emptyImageFilter(t.image)},null,8,["src"])]})),_:2},1032,["to"])])})),128))])])])}var V={props:{restaurants:{type:Array,required:!0}}};V.render=T;var W=V,X={class:"col-12 col-lg-6 px-2 mb-3"},Y={class:"info-container border"},Z={class:" px-4 py-3",style:{"border-bottom":"#cfcfcf9e solid 1px","background-color":"#f8f9fa"}},ee=Object(n["f"])(" 收藏的餐廳 "),te={class:"image-container col-12 p-4 d-flex flex-wrap"};function re(e,t,r,l,s,c){var o=Object(n["z"])("router-link");return Object(n["s"])(),Object(n["d"])("div",X,[Object(n["g"])("div",Y,[Object(n["g"])("div",Z,[Object(n["g"])("div",null,[Object(n["g"])("strong",null,Object(n["C"])(r.restaurants.length),1),ee])]),Object(n["g"])("div",te,[(Object(n["s"])(!0),Object(n["d"])(n["a"],null,Object(n["y"])(r.restaurants,(function(t){return Object(n["s"])(),Object(n["d"])("div",{key:t.id,class:"mb-2 me-2"},[Object(n["g"])(o,{to:{name:"restaurant",params:{id:t.id}}},{default:Object(n["J"])((function(){return[Object(n["g"])("img",{src:e.$filter.emptyImageFilter(t.image)},null,8,["src"])]})),_:2},1032,["to"])])})),128))])])])}var ne={props:{restaurants:{type:Array,required:!0}}};ne.render=re;var le=ne,se=r("2375"),ce={data:function(){return{userProfile:{},commentRestaurants:[],followers:[],followings:[],favRestaurants:[],isFollowed:!1,isLoading:!0}},components:{UserProfileCard:R,UserFollowingsCard:$,UserFollowersCard:G,UserCommentsCard:W,UserFavRestaurantsCard:le,Spinner:se["a"]},methods:{fetchUser:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){var n,l,s,c,o,a,u,b;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,t.isLoading=!0,r.next=4,x["a"].get(e);case 4:if(n=r.sent,l=n.data,"success"===l.status){r.next=8;break}throw new Error(l.message);case 8:s=l.userProfile,c=l.commentRestaurants,o=l.followers,a=l.followings,u=l.favRestaurants,b=l.isFollowed,t.userProfile=Object(i["a"])(Object(i["a"])({},s),{},{commentRestaurantsLength:c.length,followersLength:o.length,followingsLength:a.length,favRestaurantsLength:u.length}),t.commentRestaurants=c,t.followers=o,t.followings=a,t.favRestaurants=u,t.isFollowed=b,t.isLoading=!1,r.next=22;break;case 18:r.prev=18,r.t0=r["catch"](0),t.isLoading=!1,k["b"].fire({icon:"error",title:"Unable to get user data, please try again later."});case 22:case"end":return r.stop()}}),r,null,[[0,18]])})))()}},created:function(){var e=this.$route.params.id;this.fetchUser(e)},beforeRouteUpdate:function(e,t,r){var n=e.params.id;this.fetchUser(n),r()}};r("833f");ce.render=a;t["default"]=ce},"1ffa":function(e,t,r){},"833f":function(e,t,r){"use strict";r("1ffa")}}]);
//# sourceMappingURL=chunk-0ca95d72.c21873a8.js.map