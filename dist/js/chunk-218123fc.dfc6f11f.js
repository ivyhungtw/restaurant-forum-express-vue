(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-218123fc"],{"12b2":function(e,t,r){"use strict";r("b0c0"),r("a4d3"),r("e01a");var a=r("7a23"),n={class:"mb-3"},s=Object(a["g"])("label",{class:"form-label",for:"name"},[Object(a["f"])("Name "),Object(a["g"])("span",null,"*")],-1),c={class:"mb-3"},i=Object(a["g"])("label",{class:"form-label",for:"categoryId"},[Object(a["f"])("Category "),Object(a["g"])("span",null,"*")],-1),o=Object(a["g"])("option",{value:"",selected:"",disabled:""}," Choose category ",-1),u={class:"mb-3"},l=Object(a["g"])("label",{class:"form-label",for:"tel"},"Tel",-1),d={class:"mb-3"},b=Object(a["g"])("label",{class:"form-label",for:"address"},[Object(a["f"])("Address "),Object(a["g"])("span",null,"*")],-1),m={class:"mb-3"},g=Object(a["g"])("label",{class:"form-label",for:"opening-hours"},"Opening Hours",-1),f={class:"mb-3"},p=Object(a["g"])("label",{class:"form-label",for:"description"},[Object(a["f"])("Description "),Object(a["g"])("span",null,"*")],-1),O={class:"mb-3"},j=Object(a["g"])("label",{class:"form-label",for:"image"},"Image",-1);function h(e,t,r,h,v,y){var w=Object(a["w"])("spinner");return v.isLoading?(Object(a["p"])(),Object(a["d"])(w,{key:0})):Object(a["F"])((Object(a["p"])(),Object(a["d"])("form",{key:1,onSubmit:t[8]||(t[8]=Object(a["G"])((function(){return y.submitForm&&y.submitForm.apply(y,arguments)}),["prevent","stop"]))},[Object(a["g"])("div",n,[s,Object(a["F"])(Object(a["g"])("input",{id:"name","onUpdate:modelValue":t[1]||(t[1]=function(e){return v.restaurant.name=e}),type:"text",class:"form-control",name:"name",placeholder:"Enter name",required:""},null,512),[[a["B"],v.restaurant.name]])]),Object(a["g"])("div",c,[i,Object(a["F"])(Object(a["g"])("select",{id:"categoryId","onUpdate:modelValue":t[2]||(t[2]=function(e){return v.restaurant.categoryId=e}),class:"form-control",name:"categoryId",required:""},[o,(Object(a["p"])(!0),Object(a["d"])(a["a"],null,Object(a["v"])(v.categories,(function(e){return Object(a["p"])(),Object(a["d"])("option",{key:e.id,value:e.id},Object(a["y"])(e.name),9,["value"])})),128))],512),[[a["A"],v.restaurant.categoryId]])]),Object(a["g"])("div",u,[l,Object(a["F"])(Object(a["g"])("input",{id:"tel","onUpdate:modelValue":t[3]||(t[3]=function(e){return v.restaurant.tel=e}),type:"text",class:"form-control",name:"tel",placeholder:"Enter telephone number"},null,512),[[a["B"],v.restaurant.tel]])]),Object(a["g"])("div",d,[b,Object(a["F"])(Object(a["g"])("input",{id:"address","onUpdate:modelValue":t[4]||(t[4]=function(e){return v.restaurant.address=e}),type:"text",class:"form-control",placeholder:"Enter address",name:"address",required:""},null,512),[[a["B"],v.restaurant.address]])]),Object(a["g"])("div",m,[g,Object(a["F"])(Object(a["g"])("input",{id:"opening-hours","onUpdate:modelValue":t[5]||(t[5]=function(e){return v.restaurant.openingHours=e}),type:"time",class:"form-control",name:"opening_hours"},null,512),[[a["B"],v.restaurant.openingHours]])]),Object(a["g"])("div",f,[p,Object(a["F"])(Object(a["g"])("textarea",{id:"description","onUpdate:modelValue":t[6]||(t[6]=function(e){return v.restaurant.description=e}),class:"form-control",rows:"3",name:"description",required:""},null,512),[[a["B"],v.restaurant.description]])]),Object(a["g"])("div",O,[j,v.restaurant.image?(Object(a["p"])(),Object(a["d"])("img",{key:0,src:v.restaurant.image,class:"d-block img-thumnnail mb-3",width:"200",height:"200"},null,8,["src"])):Object(a["e"])("",!0),Object(a["g"])("input",{id:"image",class:"form-control",type:"file",name:"image",accept:"image/*",onChange:t[7]||(t[7]=function(){return y.changeFile&&y.changeFile.apply(y,arguments)})},null,32)]),Object(a["g"])("button",{type:"submit",class:"btn btn-primary",disabled:r.isProcessing},Object(a["y"])(r.isProcessing?"Processing":"Submit"),9,["disabled"])],544)),[[a["C"],!v.isLoading]])}var v=r("1da1"),y=r("5530"),w=(r("d3b7"),r("3ca3"),r("ddb0"),r("2b3d"),r("96cf"),r("2375")),F=r("be6c"),k=r("2fa3"),x={props:{initialRestaurant:{type:Object,default:function(){return{id:-1,name:"",tel:"",address:"",opening_hours:"",description:"",image:"",CategoryId:-1}}},isProcessing:{type:Boolean,requried:!0}},data:function(){return{categories:[],restaurant:Object(y["a"])({},this.initialRestaurant),isLoading:!0}},components:{Spinner:w["a"]},watch:{initialRestaurant:function(e){this.restaurant=Object(y["a"])(Object(y["a"])({},this.restaurant),e)}},methods:{fetchCategories:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.isLoading=!0,t.next=4,F["a"].categories.get();case 4:r=t.sent,a=r.data,e.categories=a.categories,e.isLoading=!1,t.next=15;break;case 10:t.prev=10,t.t0=t["catch"](0),console.log(t.t0),e.isLoading=!1,k["b"].fire({icon:"error",title:"Unable to get catogry data, please try again later."});case 15:case"end":return t.stop()}}),t,null,[[0,10]])})))()},changeFile:function(e){var t=e.target.files;if(0===t.length)this.restaurant.image="";else{var r=window.URL.createObjectURL(t[0]);this.restaurant.image=r}},submitForm:function(e){var t=this.restaurant,r=t.name,a=t.categoryId,n=t.address,s=t.description;if(!r||!a||!n||!s)return k["b"].fire({icon:"warning",title:"Please fill out all required fields."});var c=e.target,i=new FormData(c);return this.$emit("submit-form",i)}},created:function(){this.fetchCategories()}};r("2c3c");x.render=h;t["a"]=x},2743:function(e,t,r){"use strict";r.r(t);var a=r("7a23"),n={class:"container py-5"};function s(e,t,r,s,c,i){var o=Object(a["w"])("admin-restaurant-form");return Object(a["p"])(),Object(a["d"])("div",n,[Object(a["g"])(o,{onSubmitForm:i.submitForm,"is-processing":c.isProcessing},null,8,["onSubmitForm","is-processing"])])}var c=r("1da1"),i=(r("96cf"),r("12b2")),o=r("be6c"),u=r("2fa3"),l={name:"AdminRestaurantNew",components:{AdminRestaurantForm:i["a"]},data:function(){return{isProcessing:!1}},methods:{submitForm:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,t.isProcessing=!0,r.next=4,o["a"].restaurants.create({formData:e});case 4:if(a=r.sent,n=a.data,"success"===n.status){r.next=19;break}if(!n.errors){r.next=16;break}return t.isProcessing=!1,r.next=11,u["b"].fire({icon:"error",title:n.errors[0].message});case 11:if(!n.errors[1]){r.next=14;break}return r.next=14,u["b"].fire({icon:"error",title:n.errors[1].message});case 14:r.next=17;break;case 16:throw new Error(n.errors);case 17:r.next=20;break;case 19:t.$router.push({name:"admin-restaurants"});case 20:r.next=26;break;case 22:r.prev=22,r.t0=r["catch"](0),t.isProcessing=!1,u["b"].fire({icon:"error",title:"Unable to create a restaurant, please try again later."});case 26:case"end":return r.stop()}}),r,null,[[0,22]])})))()}}};l.render=s;t["default"]=l},"2c3c":function(e,t,r){"use strict";r("dce7")},be6c:function(e,t,r){"use strict";r("b0c0");var a=r("2fa3");t["a"]={categories:{get:function(){return a["c"].get("/admin/categories")},create:function(e){var t=e.name;return a["c"].post("/admin/categories",{name:t})},update:function(e){var t=e.categoryId,r=e.name;return a["c"].put("/admin/categories/".concat(t),{name:r})},delete:function(e){var t=e.categoryId;return a["c"].delete("/admin/categories/".concat(t))}},restaurants:{create:function(e){var t=e.formData;return a["c"].post("/admin/restaurants",t)},get:function(){return a["c"].get("/admin/restaurants")},getDetail:function(e){var t=e.restaurantId;return a["c"].get("/admin/restaurants/".concat(t))},update:function(e){var t=e.restaurantId,r=e.formData;return a["c"].put("/admin/restaurants/".concat(t),r)},delete:function(e){var t=e.restaurantId;return a["c"].delete("/admin/restaurants/".concat(t))}},users:{get:function(){return a["c"].get("/admin/users")},update:function(e){var t=e.userId;return a["c"].put("/admin/users/".concat(t),null)}}}},dce7:function(e,t,r){}}]);
//# sourceMappingURL=chunk-218123fc.dfc6f11f.js.map