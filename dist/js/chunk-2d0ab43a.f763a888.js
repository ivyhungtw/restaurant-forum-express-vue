(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ab43a"],{1511:function(e,t,r){"use strict";r.r(t);var l=r("7a23"),c={class:"container mt-5 pt-5"},n={class:"row"},o={class:"row"},s={class:"row mb-3"};function a(e,t,r,a,i,u){var b=Object(l["w"])("spinner"),d=Object(l["w"])("user-profile-card"),f=Object(l["w"])("user-followings-card"),g=Object(l["w"])("user-followers-card"),j=Object(l["w"])("user-comments-card"),O=Object(l["w"])("user-fav-restaurants-card");return Object(l["p"])(),Object(l["d"])("div",c,[i.isLoading?(Object(l["p"])(),Object(l["d"])(b,{key:0})):(Object(l["p"])(),Object(l["d"])(l["a"],{key:1},[Object(l["g"])("div",n,[Object(l["g"])(d,{"user-profile":i.userProfile,"initial-following":i.isFollowed},null,8,["user-profile","initial-following"])]),Object(l["g"])("div",o,[Object(l["g"])(f,{followings:i.followings},null,8,["followings"]),Object(l["g"])(g,{followers:i.followers},null,8,["followers"])]),Object(l["g"])("div",s,[Object(l["g"])(j,{restaurants:i.commentRestaurants},null,8,["restaurants"]),Object(l["g"])(O,{restaurants:i.favRestaurants},null,8,["restaurants"])])],64))])}var i=r("5530"),u=r("1da1"),b=(r("96cf"),r("b0c0"),{class:"col-12 col-md-6 col-lg-4"}),d={class:"col-12 col-md-6 col-lg-8 d-flex flex-column justify-content-between pt-4 pb-5"},f={class:"mb-3"},g=Object(l["f"])(" 已評論餐廳 "),j=Object(l["f"])(" 收藏的餐廳 "),O=Object(l["f"])(" followings "),p=Object(l["f"])(" followers "),w={key:0},m=Object(l["f"])("Edit"),v={key:1};function h(e,t,r,c,n,o){var s=Object(l["w"])("router-link");return Object(l["p"])(),Object(l["d"])(l["a"],null,[Object(l["g"])("div",b,[Object(l["g"])("img",{src:e.$filter.emptyImageFilter(r.userProfile.image),style:{width:"250px","margin-bottom":"25px"}},null,8,["src"])]),Object(l["g"])("div",d,[Object(l["g"])("div",f,[Object(l["g"])("h3",null,Object(l["y"])(r.userProfile.name),1),Object(l["g"])("p",null,Object(l["y"])(r.userProfile.email),1),Object(l["g"])("div",null,[Object(l["g"])("strong",null,Object(l["y"])(r.userProfile.commentRestaurantsLength),1),g]),Object(l["g"])("div",null,[Object(l["g"])("strong",null,Object(l["y"])(r.userProfile.favRestaurantsLength),1),j]),Object(l["g"])("div",null,[Object(l["g"])("strong",null,Object(l["y"])(r.userProfile.followingsLength),1),O]),Object(l["g"])("div",null,[Object(l["g"])("strong",null,Object(l["y"])(r.userProfile.followersLength),1),p])]),e.currentUser.id===r.userProfile.id?(Object(l["p"])(),Object(l["d"])("div",w,[Object(l["g"])(s,{to:{name:"user-profile-edit",params:{id:e.currentUser.id}},class:"btn btn-primary"},{default:Object(l["E"])((function(){return[m]})),_:1},8,["to"])])):(Object(l["p"])(),Object(l["d"])("div",v,[n.isFollowed?(Object(l["p"])(),Object(l["d"])("button",{key:0,type:"button",class:"btn btn-danger",onClick:t[1]||(t[1]=Object(l["G"])((function(e){return o.unfollow(r.userProfile.id)}),["stop","prevent"]))}," Unfollow ")):(Object(l["p"])(),Object(l["d"])("button",{key:1,type:"button",class:"btn btn-primary",onClick:t[2]||(t[2]=Object(l["G"])((function(e){return o.follow(r.userProfile.id)}),["stop","prevent"]))}," Follow "))]))])],64)}var y=r("5502"),x=r("4cce"),k=r("2fa3"),F={props:{userProfile:{type:Object,required:!0},initialFollowing:{type:Boolean,required:!0}},data:function(){return{isFollowed:this.initialFollowing}},computed:Object(i["a"])({},Object(y["b"])(["currentUser"])),watch:{initialFollowing:function(e){this.isFollowed=e}},methods:{follow:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){var l,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,x["a"].follow(e);case 3:if(l=r.sent,c=l.data,"success"===c.status){r.next=7;break}throw new Error(c.message);case 7:t.isFollowed=!0,r.next=13;break;case 10:r.prev=10,r.t0=r["catch"](0),k["b"].fire({icon:"error",title:"Unable to follow the user, please try again later."});case 13:case"end":return r.stop()}}),r,null,[[0,10]])})))()},unfollow:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){var l,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,x["a"].unfollow(e);case 3:if(l=r.sent,c=l.data,"success"===c.status){r.next=7;break}throw new Error(c.message);case 7:t.isFollowed=!1,r.next=13;break;case 10:r.prev=10,r.t0=r["catch"](0),k["b"].fire({icon:"error",title:"Unable to unfollow the user, please try again later."});case 13:case"end":return r.stop()}}),r,null,[[0,10]])})))()}}};F.render=h;var R=F,P={class:"col-12 col-lg-6 px-2 mb-3",style:{"background-color":"white"}},U={class:"border",style:{height:"100%"}},L={class:" px-4 py-3",style:{"border-bottom":"#cfcfcf9e solid 1px","background-color":"#f8f9fa"}},E=Object(l["f"])(" followings "),C={class:"col-12 p-4 d-flex flex-wrap",style:{"background-color":"white"}};function q(e,t,r,c,n,o){var s=Object(l["w"])("router-link");return Object(l["p"])(),Object(l["d"])("div",P,[Object(l["g"])("div",U,[Object(l["g"])("div",L,[Object(l["g"])("div",null,[Object(l["g"])("strong",null,Object(l["y"])(r.followings.length),1),E])]),Object(l["g"])("div",C,[(Object(l["p"])(!0),Object(l["d"])(l["a"],null,Object(l["v"])(r.followings,(function(t){return Object(l["p"])(),Object(l["d"])("div",{key:t.id,class:"mb-2 me-2"},[Object(l["g"])(s,{to:{name:"user-profile",params:{id:t.id}}},{default:Object(l["E"])((function(){return[Object(l["g"])("img",{src:e.$filter.emptyImageFilter(t.image),style:{width:"60px",height:"60px"}},null,8,["src"])]})),_:2},1032,["to"])])})),128))])])])}var $={props:{followings:{type:Array,required:!0}}};$.render=q;var I=$,_={class:"col-12 col-lg-6 px-2 mb-3",style:{"background-color":"white"}},A={class:"border",style:{height:"100%"}},G={class:" px-4 py-3",style:{"border-bottom":"#cfcfcf9e solid 1px","background-color":"#f8f9fa"}},J=Object(l["f"])(" followers "),B={class:"col-12 p-4 d-flex flex-wrap",style:{"background-color":"white"}};function S(e,t,r,c,n,o){var s=Object(l["w"])("router-link");return Object(l["p"])(),Object(l["d"])("div",_,[Object(l["g"])("div",A,[Object(l["g"])("div",G,[Object(l["g"])("div",null,[Object(l["g"])("strong",null,Object(l["y"])(r.followers.length),1),J])]),Object(l["g"])("div",B,[(Object(l["p"])(!0),Object(l["d"])(l["a"],null,Object(l["v"])(r.followers,(function(t){return Object(l["p"])(),Object(l["d"])("div",{key:t.id,class:"mb-2 me-2"},[Object(l["g"])(s,{to:{name:"user-profile",params:{id:t.id}}},{default:Object(l["E"])((function(){return[Object(l["g"])("img",{src:e.$filter.emptyImageFilter(t.image),style:{width:"60px",height:"60px"}},null,8,["src"])]})),_:2},1032,["to"])])})),128))])])])}var z={props:{followers:{type:Array,required:!0}}};z.render=S;var D=z,H={class:"col-12 col-lg-6 px-2 mb-3",style:{"background-color":"white"}},K={class:"border",style:{height:"100%"}},M={class:" px-4 py-3",style:{"border-bottom":"#cfcfcf9e solid 1px","background-color":"#f8f9fa"}},N=Object(l["f"])(" 已評論餐廳 "),Q={class:"col-12 p-4 d-flex flex-wrap",style:{"background-color":"white"}};function T(e,t,r,c,n,o){var s=Object(l["w"])("router-link");return Object(l["p"])(),Object(l["d"])("div",H,[Object(l["g"])("div",K,[Object(l["g"])("div",M,[Object(l["g"])("div",null,[Object(l["g"])("strong",null,Object(l["y"])(r.restaurants.length),1),N])]),Object(l["g"])("div",Q,[(Object(l["p"])(!0),Object(l["d"])(l["a"],null,Object(l["v"])(r.restaurants,(function(t){return Object(l["p"])(),Object(l["d"])("div",{key:t.id,class:"mb-2 me-2"},[Object(l["g"])(s,{to:{name:"restaurant",params:{id:t.id}}},{default:Object(l["E"])((function(){return[Object(l["g"])("img",{src:e.$filter.emptyImageFilter(t.image),style:{width:"60px",height:"60px"}},null,8,["src"])]})),_:2},1032,["to"])])})),128))])])])}var V={props:{restaurants:{type:Array,required:!0}}};V.render=T;var W=V,X={class:"col-12 col-lg-6 px-2 mb-3",style:{"background-color":"white"}},Y={class:"border",style:{height:"100%"}},Z={class:" px-4 py-3",style:{"border-bottom":"#cfcfcf9e solid 1px","background-color":"#f8f9fa"}},ee=Object(l["f"])(" 收藏的餐廳 "),te={class:"col-12 p-4 d-flex flex-wrap",style:{"background-color":"white"}};function re(e,t,r,c,n,o){var s=Object(l["w"])("router-link");return Object(l["p"])(),Object(l["d"])("div",X,[Object(l["g"])("div",Y,[Object(l["g"])("div",Z,[Object(l["g"])("div",null,[Object(l["g"])("strong",null,Object(l["y"])(r.restaurants.length),1),ee])]),Object(l["g"])("div",te,[(Object(l["p"])(!0),Object(l["d"])(l["a"],null,Object(l["v"])(r.restaurants,(function(t){return Object(l["p"])(),Object(l["d"])("div",{key:t.id,class:"mb-2 me-2"},[Object(l["g"])(s,{to:{name:"restaurant",params:{id:t.id}}},{default:Object(l["E"])((function(){return[Object(l["g"])("img",{src:e.$filter.emptyImageFilter(t.image),style:{width:"60px",height:"60px"}},null,8,["src"])]})),_:2},1032,["to"])])})),128))])])])}var le={props:{restaurants:{type:Array,required:!0}}};le.render=re;var ce=le,ne=r("2375"),oe={data:function(){return{userProfile:{},commentRestaurants:[],followers:[],followings:[],favRestaurants:[],isFollowed:!1,isLoading:!0}},components:{UserProfileCard:R,UserFollowingsCard:I,UserFollowersCard:D,UserCommentsCard:W,UserFavRestaurantsCard:ce,Spinner:ne["a"]},methods:{fetchUser:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){var l,c,n,o,s,a,u,b;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,t.isLoading=!0,r.next=4,x["a"].get(e);case 4:if(l=r.sent,c=l.data,"success"===c.status){r.next=8;break}throw new Error(c.message);case 8:n=c.userProfile,o=c.commentRestaurants,s=c.followers,a=c.followings,u=c.favRestaurants,b=c.isFollowed,t.userProfile=Object(i["a"])(Object(i["a"])({},n),{},{commentRestaurantsLength:o.length,followersLength:s.length,followingsLength:a.length,favRestaurantsLength:u.length}),t.commentRestaurants=o,t.followers=s,t.followings=a,t.favRestaurants=u,t.isFollowed=b,t.isLoading=!1,r.next=22;break;case 18:r.prev=18,r.t0=r["catch"](0),t.isLoading=!1,k["b"].fire({icon:"error",title:"Unable to get user data, please try again later."});case 22:case"end":return r.stop()}}),r,null,[[0,18]])})))()}},created:function(){var e=this.$route.params.id;this.fetchUser(e)},beforeRouteUpdate:function(e,t,r){var l=e.params.id;this.fetchUser(l),r()}};oe.render=a;t["default"]=oe}}]);
//# sourceMappingURL=chunk-2d0ab43a.f763a888.js.map