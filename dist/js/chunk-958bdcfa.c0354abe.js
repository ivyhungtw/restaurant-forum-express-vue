(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-958bdcfa"],{6135:function(e,t,n){"use strict";n.r(t);var r=n("7a23"),a={class:"container py-5"},c={class:"table table-striped"},s=Object(r["g"])("thead",{class:"table-dark"},[Object(r["g"])("tr",null,[Object(r["g"])("th",{scope:"col"}," # "),Object(r["g"])("th",{scope:"col"}," Email "),Object(r["g"])("th",{scope:"col"}," Role "),Object(r["g"])("th",{scope:"col",width:"140"}," Action ")])],-1),i={scope:"row"},u={key:0},o={key:1};function d(e,t,n,d,b,l){var g=Object(r["z"])("spinner"),j=Object(r["z"])("admin-nav");return Object(r["s"])(),Object(r["d"])("div",a,[b.isLoading?(Object(r["s"])(),Object(r["d"])(g,{key:0})):(Object(r["s"])(),Object(r["d"])(r["a"],{key:1},[Object(r["g"])(j),Object(r["g"])("table",c,[s,Object(r["g"])("tbody",null,[(Object(r["s"])(!0),Object(r["d"])(r["a"],null,Object(r["y"])(b.users,(function(t){return Object(r["s"])(),Object(r["d"])("tr",{key:t.id},[Object(r["g"])("th",i,Object(r["C"])(t.id),1),Object(r["g"])("td",null,Object(r["C"])(t.email),1),t.isAdmin?(Object(r["s"])(),Object(r["d"])("td",u,"admin")):(Object(r["s"])(),Object(r["d"])("td",o,"user")),Object(r["g"])("td",null,[t.isAdmin&&t.id!==e.currentUser.id?(Object(r["s"])(),Object(r["d"])("button",{key:0,type:"button",class:"btn btn-link",onClick:Object(r["L"])((function(e){return l.toggleRole(t.id)}),["prevent","stop"]),disabled:b.isProcessing}," set as user ",8,["onClick","disabled"])):t.isAdmin?Object(r["e"])("",!0):(Object(r["s"])(),Object(r["d"])("button",{key:1,type:"button",class:"btn btn-link",onClick:Object(r["L"])((function(e){return l.toggleRole(t.id)}),["prevent","stop"]),disabled:b.isProcessing}," set as admin ",8,["onClick","disabled"]))])])})),128))])])],64))])}var b=n("1da1"),l=n("5530"),g=(n("d81d"),n("96cf"),n("5502")),j=n("e04c"),O=n("2375"),f=n("be6c"),m=n("2fa3"),p={name:"AdminUsers",components:{AdminNav:j["a"],Spinner:O["a"]},data:function(){return{users:[],isProcessing:!1,isLoading:!0}},computed:Object(l["a"])({},Object(g["b"])(["currentUser"])),created:function(){this.fetchUsers()},methods:{fetchUsers:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.isLoading=!0,t.next=4,f["a"].users.get();case 4:if(n=t.sent,r=n.data,"success"===r.status){t.next=8;break}throw new Error(r.message);case 8:e.users=r.users,e.isLoading=!1,t.next=17;break;case 12:t.prev=12,t.t0=t["catch"](0),e.isLoading=!1,console.log(t.t0),m["b"].fire({icon:"error",title:"Unable to get users data, please try again later."});case 17:case"end":return t.stop()}}),t,null,[[0,12]])})))()},toggleRole:function(e){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,f["a"].users.update({userId:e});case 3:if(r=n.sent,a=r.data,"success"===a.status){n.next=10;break}if(t.isProcessing=!1,"error"!==a.status){n.next=9;break}return n.abrupt("return",m["b"].fire({icon:"error",title:a.message}));case 9:throw new Error(a.message);case 10:return t.users=t.users.map((function(t){return t.id===e?Object(l["a"])(Object(l["a"])({},t),{},{isAdmin:!t.isAdmin}):t})),n.abrupt("return",null);case 14:return n.prev=14,n.t0=n["catch"](0),t.isProcessing=!1,console.log(n.t0),n.abrupt("return",m["b"].fire({icon:"error",title:"Unable to update user data, please try again later."}));case 19:case"end":return n.stop()}}),n,null,[[0,14]])})))()}}};p.render=d;t["default"]=p},be6c:function(e,t,n){"use strict";n("b0c0");var r=n("2fa3");t["a"]={categories:{get:function(){return r["c"].get("/admin/categories")},create:function(e){var t=e.name;return r["c"].post("/admin/categories",{name:t})},update:function(e){var t=e.categoryId,n=e.name;return r["c"].put("/admin/categories/".concat(t),{name:n})},delete:function(e){var t=e.categoryId;return r["c"].delete("/admin/categories/".concat(t))}},restaurants:{create:function(e){var t=e.formData;return r["c"].post("/admin/restaurants",t)},get:function(){return r["c"].get("/admin/restaurants")},getDetail:function(e){var t=e.restaurantId;return r["c"].get("/admin/restaurants/".concat(t))},update:function(e){var t=e.restaurantId,n=e.formData;return r["c"].put("/admin/restaurants/".concat(t),n)},delete:function(e){var t=e.restaurantId;return r["c"].delete("/admin/restaurants/".concat(t))}},users:{get:function(){return r["c"].get("/admin/users")},update:function(e){var t=e.userId;return r["c"].put("/admin/users/".concat(t),null)}}}},d81d:function(e,t,n){"use strict";var r=n("23e7"),a=n("b727").map,c=n("1dde"),s=c("map");r({target:"Array",proto:!0,forced:!s},{map:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},e04c:function(e,t,n){"use strict";var r=n("7a23"),a={class:"mb-3"},c=Object(r["g"])("h1",null,"Admin Backend",-1),s=Object(r["f"])("Restaurants"),i=Object(r["f"])(" | "),u=Object(r["f"])("Categories"),o=Object(r["f"])(" | "),d=Object(r["f"])("Users");function b(e,t,n,b,l,g){var j=Object(r["z"])("router-link");return Object(r["s"])(),Object(r["d"])("div",a,[c,Object(r["g"])(j,{to:{name:"admin-restaurants"}},{default:Object(r["J"])((function(){return[s]})),_:1}),i,Object(r["g"])(j,{to:{name:"admin-categories"}},{default:Object(r["J"])((function(){return[u]})),_:1}),o,Object(r["g"])(j,{to:{name:"admin-users"}},{default:Object(r["J"])((function(){return[d]})),_:1})])}var l={name:"AdminNav"};l.render=b;t["a"]=l}}]);
//# sourceMappingURL=chunk-958bdcfa.c0354abe.js.map