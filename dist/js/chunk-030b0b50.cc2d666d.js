(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-030b0b50"],{"0ce6":function(e,t,r){"use strict";r("6ba8")},"12b2":function(e,t,r){"use strict";r("b0c0"),r("a4d3"),r("e01a");var a=r("7a23"),n={class:"mb-3"},s=Object(a["g"])("label",{class:"form-label",for:"name"},[Object(a["f"])("Name "),Object(a["g"])("span",null,"*")],-1),i={class:"mb-3"},c=Object(a["g"])("label",{class:"form-label",for:"categoryId"},[Object(a["f"])("Category "),Object(a["g"])("span",null,"*")],-1),o=Object(a["g"])("option",{value:"",disabled:""}," Choose category ",-1),u={class:"mb-3"},l=Object(a["g"])("label",{class:"form-label",for:"tel"},"Tel",-1),d={class:"mb-3"},m=Object(a["g"])("label",{class:"form-label",for:"address"},[Object(a["f"])("Address "),Object(a["g"])("span",null,"*")],-1),b={class:"mb-3"},g=Object(a["g"])("label",{class:"form-label",for:"opening-hours"},"Opening Hours",-1),f={class:"mb-3"},p=Object(a["g"])("label",{class:"form-label",for:"description"},[Object(a["f"])("Description "),Object(a["g"])("span",null,"*")],-1),j={class:"mb-3"},O=Object(a["g"])("label",{class:"form-label",for:"image"},"Image",-1);function h(e,t,r,h,v,y){var x=Object(a["z"])("spinner"),w=Object(a["z"])("vee-field"),I=Object(a["z"])("ErrorMessage"),k=Object(a["z"])("vee-form");return v.isLoading?(Object(a["s"])(),Object(a["d"])(x,{key:0})):Object(a["K"])((Object(a["s"])(),Object(a["d"])(k,{key:1,"validation-schema":v.schema,onSubmit:y.submitForm},{default:Object(a["J"])((function(){return[Object(a["g"])("div",n,[s,Object(a["g"])(w,{id:"name",modelValue:v.restaurant.name,"onUpdate:modelValue":t[1]||(t[1]=function(e){return v.restaurant.name=e}),type:"text",class:"form-control",name:"name",placeholder:"Enter name",required:""},null,8,["modelValue"]),Object(a["g"])(I,{class:"text-red",name:"name"})]),Object(a["g"])("div",i,[c,Object(a["g"])(w,{as:"select",id:"categoryId",modelValue:v.restaurant.categoryId,"onUpdate:modelValue":t[2]||(t[2]=function(e){return v.restaurant.categoryId=e}),class:"form-control",name:"categoryId",required:""},{default:Object(a["J"])((function(){return[o,(Object(a["s"])(!0),Object(a["d"])(a["a"],null,Object(a["y"])(v.categories,(function(e){return Object(a["s"])(),Object(a["d"])("option",{key:e.id,value:e.id},Object(a["C"])(e.name),9,["value"])})),128))]})),_:1},8,["modelValue"]),Object(a["g"])(I,{class:"text-red",name:"categoryId"})]),Object(a["g"])("div",u,[l,Object(a["g"])(w,{id:"tel",modelValue:v.restaurant.tel,"onUpdate:modelValue":t[3]||(t[3]=function(e){return v.restaurant.tel=e}),type:"text",class:"form-control",name:"tel",placeholder:"Enter telephone number"},null,8,["modelValue"]),Object(a["g"])(I,{class:"text-red",name:"tel"})]),Object(a["g"])("div",d,[m,Object(a["g"])(w,{id:"address",modelValue:v.restaurant.address,"onUpdate:modelValue":t[4]||(t[4]=function(e){return v.restaurant.address=e}),type:"text",class:"form-control",placeholder:"Enter address",name:"address",required:""},null,8,["modelValue"]),Object(a["g"])(I,{class:"text-red",name:"address"})]),Object(a["g"])("div",b,[g,Object(a["g"])(w,{id:"opening-hours",modelValue:v.restaurant.openingHours,"onUpdate:modelValue":t[5]||(t[5]=function(e){return v.restaurant.openingHours=e}),type:"time",class:"form-control",name:"opening_hours"},null,8,["modelValue"]),Object(a["g"])(I,{class:"text-red",name:"opening_hours"})]),Object(a["g"])("div",f,[p,Object(a["g"])(w,{as:"textarea",id:"description",modelValue:v.restaurant.description,"onUpdate:modelValue":t[6]||(t[6]=function(e){return v.restaurant.description=e}),class:"form-control",rows:"3",name:"description",required:""},null,8,["modelValue"]),Object(a["g"])(I,{class:"text-red",name:"description"})]),Object(a["g"])("div",j,[O,v.restaurant.image?(Object(a["s"])(),Object(a["d"])("img",{key:0,src:v.restaurant.image,class:"d-block img-thumnnail mb-3",width:"200",height:"200"},null,8,["src"])):Object(a["e"])("",!0),Object(a["g"])(w,{id:"image",class:"form-control",type:"file",name:"image",accept:"image/*",onChange:y.changeFile},null,8,["onChange"]),Object(a["g"])(I,{class:"text-red",name:"image"})]),Object(a["g"])("button",{type:"submit",class:"btn btn-primary",disabled:r.isProcessing},Object(a["C"])(r.isProcessing?"Processing":"Submit"),9,["disabled"])]})),_:1},8,["validation-schema","onSubmit"])),[[a["G"],!v.isLoading]])}var v=r("2909"),y=r("1da1"),x=r("5530"),w=(r("d3b7"),r("3ca3"),r("ddb0"),r("2b3d"),r("96cf"),r("2375")),I=r("be6c"),k=r("2fa3"),V={props:{initialRestaurant:{type:Object,default:function(){return{id:-1,name:"",tel:"",address:"",opening_hours:"",description:"",image:"",CategoryId:-1}}},isProcessing:{type:Boolean,requried:!0}},data:function(){return{categories:[],restaurant:Object(x["a"])({},this.initialRestaurant),isLoading:!0,schema:{name:"required|min:3|max:50",categoryId:"category",tel:"min:9|max:13",address:"required",description:"required|min:3|max:500",image:"image"}}},components:{Spinner:w["a"]},watch:{initialRestaurant:function(e){this.restaurant=Object(x["a"])(Object(x["a"])({},this.restaurant),e)}},methods:{fetchCategories:function(){var e=this;return Object(y["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.isLoading=!0,t.next=4,I["a"].categories.get();case 4:r=t.sent,a=r.data,e.categories=a.categories,e.isLoading=!1,t.next=15;break;case 10:t.prev=10,t.t0=t["catch"](0),console.log(t.t0),e.isLoading=!1,k["b"].fire({icon:"error",title:"Unable to get catogry data, please try again later."});case 15:case"end":return t.stop()}}),t,null,[[0,10]])})))()},changeFile:function(e){var t=e.target.files;if(0===t.length)this.restaurant.image="";else{var r=window.URL.createObjectURL(t[0]);this.restaurant.image=r}},submitForm:function(e){var t=this.restaurant,r=t.name,a=t.categoryId,n=t.address,s=t.description;if(!r||!a||!n||!s)return k["b"].fire({icon:"warning",title:"Please fill out all required fields."});var i=e.image?Object(v["a"])(e.image)[0]:null,c=Object(x["a"])({},this.restaurant),o=new FormData;for(var u in o.append("image",i),c)"image"!==u&&o.append(u,c[u]);return this.$emit("submit-form",o)}},created:function(){this.fetchCategories()}};r("0ce6");V.render=h;t["a"]=V},2909:function(e,t,r){"use strict";function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function n(e){if(Array.isArray(e))return a(e)}r.d(t,"a",(function(){return o}));r("a4d3"),r("e01a"),r("d3b7"),r("d28b"),r("3ca3"),r("ddb0"),r("a630");function s(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}r("fb6a"),r("b0c0");function i(e,t){if(e){if("string"===typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(e){return n(e)||s(e)||i(e)||c()}},6945:function(e,t,r){"use strict";r.r(t);var a=r("7a23"),n={class:"container py-5"};function s(e,t,r,s,i,c){var o=Object(a["z"])("spinner"),u=Object(a["z"])("admin-restaurant-form");return Object(a["s"])(),Object(a["d"])("div",n,[i.isLoading?(Object(a["s"])(),Object(a["d"])(o,{key:0})):(Object(a["s"])(),Object(a["d"])(u,{key:1,"initial-restaurant":i.restaurant,onSubmitForm:c.submitForm,"is-processing":i.isProcessing},null,8,["initial-restaurant","onSubmitForm","is-processing"]))])}var i=r("1da1"),c=(r("96cf"),r("b0c0"),r("a4d3"),r("e01a"),r("12b2")),o=r("2375"),u=r("be6c"),l=r("2fa3"),d={name:"AdminRestaurantEdit",components:{AdminRestaurantForm:c["a"],Spinner:o["a"]},data:function(){return{restaurant:{id:-1,name:"",tel:"",address:"",opening_hours:"",description:"",image:"",CategoryId:-1},isProcessing:!1,isLoading:!0}},created:function(){var e=this.$route.params.id;this.fetchRestaurant(e)},beforeRouteUpdate:function(e,t,r){var a=e.params.id;this.fetchRestaurant(a),r()},methods:{fetchRestaurant:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a,n,s,i,c,o,d,m,b,g,f;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,t.isLoading=!0,r.next=4,u["a"].restaurants.getDetail({restaurantId:e});case 4:a=r.sent,n=a.data,s=n.restaurant,i=s.id,c=s.name,o=s.tel,d=s.address,m=s.opening_hours,b=s.description,g=s.image,f=s.CategoryId,t.restaurant={id:i,name:c,tel:o,address:d,openingHours:m,description:b,image:g,categoryId:f},t.isLoading=!1,r.next=15;break;case 11:r.prev=11,r.t0=r["catch"](0),t.isLoading=!1,l["b"].fire({icon:"error",title:"Unable to get restaurant data, please try again later."});case 15:case"end":return r.stop()}}),r,null,[[0,11]])})))()},submitForm:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,t.isProcessing=!0,r.next=4,u["a"].restaurants.update({restaurantId:t.restaurant.id,formData:e});case 4:if(a=r.sent,n=a.data,"success"===n.status){r.next=19;break}if(!n.errors){r.next=16;break}return t.isProcessing=!1,r.next=11,l["b"].fire({icon:"error",title:n.errors[0].message});case 11:if(!n.errors[1]){r.next=14;break}return r.next=14,l["b"].fire({icon:"error",title:n.errors[1].message});case 14:r.next=17;break;case 16:throw new Error(n.errors);case 17:r.next=21;break;case 19:t.$router.push({name:"admin-restaurants"}),l["b"].fire({icon:"success",title:"Update the restaurant successfully!"});case 21:r.next=27;break;case 23:r.prev=23,r.t0=r["catch"](0),t.isProcessing=!1,l["b"].fire({icon:"error",title:"Unable to update restaurant data, please try again later."});case 27:case"end":return r.stop()}}),r,null,[[0,23]])})))()}}};d.render=s;t["default"]=d},"6ba8":function(e,t,r){},a630:function(e,t,r){var a=r("23e7"),n=r("4df4"),s=r("1c7e"),i=!s((function(e){Array.from(e)}));a({target:"Array",stat:!0,forced:i},{from:n})},be6c:function(e,t,r){"use strict";r("b0c0");var a=r("2fa3");t["a"]={categories:{get:function(){return a["c"].get("/admin/categories")},create:function(e){var t=e.name;return a["c"].post("/admin/categories",{name:t})},update:function(e){var t=e.categoryId,r=e.name;return a["c"].put("/admin/categories/".concat(t),{name:r})},delete:function(e){var t=e.categoryId;return a["c"].delete("/admin/categories/".concat(t))}},restaurants:{create:function(e){var t=e.formData;return a["c"].post("/admin/restaurants",t)},get:function(){return a["c"].get("/admin/restaurants")},getDetail:function(e){var t=e.restaurantId;return a["c"].get("/admin/restaurants/".concat(t))},update:function(e){var t=e.restaurantId,r=e.formData;return a["c"].put("/admin/restaurants/".concat(t),r)},delete:function(e){var t=e.restaurantId;return a["c"].delete("/admin/restaurants/".concat(t))}},users:{get:function(){return a["c"].get("/admin/users")},update:function(e){var t=e.userId;return a["c"].put("/admin/users/".concat(t),null)}}}},d28b:function(e,t,r){var a=r("746f");a("iterator")},fb6a:function(e,t,r){"use strict";var a=r("23e7"),n=r("861d"),s=r("e8b5"),i=r("23cb"),c=r("50c4"),o=r("fc6a"),u=r("8418"),l=r("b622"),d=r("1dde"),m=d("slice"),b=l("species"),g=[].slice,f=Math.max;a({target:"Array",proto:!0,forced:!m},{slice:function(e,t){var r,a,l,d=o(this),m=c(d.length),p=i(e,m),j=i(void 0===t?m:t,m);if(s(d)&&(r=d.constructor,"function"!=typeof r||r!==Array&&!s(r.prototype)?n(r)&&(r=r[b],null===r&&(r=void 0)):r=void 0,r===Array||void 0===r))return g.call(d,p,j);for(a=new(void 0===r?Array:r)(f(j-p,0)),l=0;p<j;p++,l++)p in d&&u(a,l,d[p]);return a.length=l,a}})}}]);
//# sourceMappingURL=chunk-030b0b50.cc2d666d.js.map