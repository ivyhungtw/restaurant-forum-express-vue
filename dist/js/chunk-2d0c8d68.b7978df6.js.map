{"version":3,"sources":["webpack:///./src/views/RestaurantsTop.vue","webpack:///./src/components/TopRestaurantCard.vue","webpack:///./src/components/TopRestaurantCard.vue?0da1","webpack:///./src/views/RestaurantsTop.vue?3ef1"],"names":["class","isLoading","restaurants","restaurant","key","id","initial-restaurant","style","to","src","$filter","emptyImageFilter","image","favCount","description","isFavorited","type","removeFavorite","addFavorite","props","initialRestaurant","Object","required","data","this","watch","newValue","methods","restaurantId","status","Error","message","fire","icon","title","render","components","TopRestaurantCard","Spinner","fetchTopRestaurants","getTopRestaurants","created"],"mappings":"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","file":"js/chunk-2d0c8d68.b7978df6.js","sourcesContent":["<template>\n  <div class=\"container py-5\">\n    <!-- Spinner -->\n    <spinner v-if=\"isLoading\" />\n    <template v-else>\n      <!-- Title -->\n      <div class=\"title text-center col-12 p-5 mb-3\">\n        <h1 class=\"mb-3\">Top Restaurants</h1>\n        <p>\n          Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt\n          ut labore et dolore magna aliqua. Lectus magna fringilla urna porttitor rhoncus. Tellus\n          orci ac auctor augue mauris.\n        </p>\n      </div>\n\n      <hr />\n      <!-- Top Restaurant List -->\n      <top-restaurant-card\n        v-for=\"restaurant in restaurants\"\n        :key=\"restaurant.id\"\n        :initial-restaurant=\"restaurant\"\n      />\n    </template>\n  </div>\n</template>\n\n<script>\nimport TopRestaurantCard from '../components/TopRestaurantCard.vue';\nimport Spinner from '../components/Spinner.vue';\nimport restaurantsAPI from '../apis/restaurants';\nimport { Toast } from '../utils/helpers';\n\nexport default {\n  data() {\n    return {\n      restaurants: [],\n      isLoading: true\n    };\n  },\n  components: {\n    TopRestaurantCard,\n    Spinner\n  },\n  methods: {\n    async fetchTopRestaurants() {\n      this.isLoading = true;\n      try {\n        const { data } = await restaurantsAPI.getTopRestaurants();\n\n        this.restaurants = data.restaurants;\n        this.isLoading = false;\n      } catch (err) {\n        this.isLoading = false;\n        Toast.fire({\n          icon: 'error',\n          title: 'Unable to get top restaurants data, please try again later.'\n        });\n      }\n    }\n  },\n  created() {\n    this.fetchTopRestaurants();\n  }\n};\n</script>\n","<template>\n  <div class=\"card mb-3\" style=\"max-width: 540px;margin: auto;\">\n    <div class=\"row no-gutters\">\n      <div class=\"col-md-4\">\n        <router-link :to=\"{ name: 'restaurant', params: { id: restaurant.id } }\">\n          <img\n            class=\"card-img\"\n            :src=\"$filter.emptyImageFilter(restaurant.image)\"\n            style=\"height: 100%; object-fit: cover;\"\n          />\n        </router-link>\n      </div>\n      <div class=\"col-md-8\">\n        <div class=\"card-body\">\n          <h5 class=\"card-title\">\n            Mrs. Mckenzie Johnston\n          </h5>\n          <span class=\"badge bg-secondary\">Savedï¼š{{ restaurant.favCount || 0 }}</span>\n          <p class=\"card-text\">\n            {{ restaurant.description }}\n          </p>\n          <router-link\n            :to=\"{ name: 'restaurant', params: { id: restaurant.id } }\"\n            class=\"btn btn-primary me-2\"\n            >Detail</router-link\n          >\n\n          <button\n            v-if=\"restaurant.isFavorited\"\n            type=\"button\"\n            class=\"btn btn-danger me-2\"\n            @click.prevent.stop=\"removeFavorite(restaurant.id)\"\n          >\n            Remove from Fav\n          </button>\n          <button\n            v-else\n            type=\"button\"\n            class=\"btn btn-primary\"\n            @click.prevent.stop=\"addFavorite(restaurant.id)\"\n          >\n            Add to Fav\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport restaurantsAPI from '../apis/restaurants';\nimport { Toast } from '../utils/helpers';\n\nexport default {\n  props: {\n    initialRestaurant: {\n      type: Object,\n      required: true\n    }\n  },\n  data() {\n    return {\n      restaurant: this.initialRestaurant\n    };\n  },\n  watch: {\n    initialRestaurant(newValue) {\n      this.restaurant = {\n        ...this.restaurant,\n        ...newValue\n      };\n    }\n  },\n  methods: {\n    async addFavorite(restaurantId) {\n      try {\n        const { data } = await restaurantsAPI.addFavorite({ restaurantId });\n        if (data.status !== 'success') {\n          throw new Error(data.message);\n        }\n\n        this.restaurant = {\n          ...this.restaurant,\n          isFavorited: true,\n          favCount: this.restaurant.favCount ? this.restaurant.favCount + 1 : 1\n        };\n      } catch (err) {\n        Toast.fire({\n          icon: 'error',\n          title: 'Unable to add the restaurant to your favorite list, please try again later.'\n        });\n      }\n    },\n    async removeFavorite(restaurantId) {\n      try {\n        const { data } = await restaurantsAPI.removeFavorite({ restaurantId });\n        if (data.status !== 'success') {\n          throw new Error(data.message);\n        }\n\n        this.restaurant = {\n          ...this.restaurant,\n          favCount: this.restaurant.favCount - 1,\n          isFavorited: false\n        };\n      } catch (err) {\n        Toast.fire({\n          icon: 'error',\n          title: 'Unable to remove the restaurant from your favorite list, please try again later.'\n        });\n      }\n    }\n  }\n};\n</script>\n","import { render } from \"./TopRestaurantCard.vue?vue&type=template&id=30c9ac64\"\nimport script from \"./TopRestaurantCard.vue?vue&type=script&lang=js\"\nexport * from \"./TopRestaurantCard.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { render } from \"./RestaurantsTop.vue?vue&type=template&id=9277a384\"\nimport script from \"./RestaurantsTop.vue?vue&type=script&lang=js\"\nexport * from \"./RestaurantsTop.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}